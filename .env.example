DATABASE_URL=postgres://user:password@localhost:5432/dbname

DB_NAME=medusa

# ==================================================
# CORS CONFIGURATION
# ==================================================
# Autoriser les requêtes depuis le frontend Next.js
STORE_CORS=http://localhost:3200,http://localhost:8000
ADMIN_CORS=http://localhost:9000
AUTH_CORS=REPLACE_ME

# ==================================================
# STRIPE PAYMENT CONFIGURATION
# ==================================================
# Clés API Stripe - À obtenir sur: https://dashboard.stripe.com/apikeys
#
# IMPORTANT:
# 1. Créez un compte Stripe sur https://stripe.com
# 2. Allez dans "Développeurs" > "Clés API"
# 3. Copiez votre clé secrète (sk_test_... pour test, sk_live_... pour production)
# 4. Remplacez YOUR_STRIPE_SECRET_KEY_HERE ci-dessous
#
# Pour le webhook:
# 1. Allez dans "Développeurs" > "Webhooks"
# 2. Cliquez "Ajouter un point de terminaison"
# 3. URL: http://localhost:9000/hooks/stripe
# 4. Événements à écouter: payment_intent.succeeded, payment_intent.payment_failed
# 5. Copiez le "Secret de signature du webhook" (whsec_...)
# 6. Remplacez YOUR_STRIPE_WEBHOOK_SECRET_HERE ci-dessous

STRIPE_SECRET_KEY=REPLACE_ME
STRIPE_WEBHOOK_SECRET=REPLACE_ME

# Note: Pour tester sans compte Stripe, vous pouvez utiliser ces clés de test:
# STRIPE_SECRET_KEY=REPLACE_ME
# STRIPE_WEBHOOK_SECRET=REPLACE_ME

# ==================================================
# BREVO EMAIL CONFIGURATION (ex-Sendinblue)
# ==================================================
# Clés API Brevo - À obtenir sur: https://app.brevo.com/settings/keys/api
#
# IMPORTANT:
# 1. Créez un compte Brevo sur https://www.brevo.com (GRATUIT jusqu'à 300 emails/jour)
# 2. Confirmez votre email
# 3. Allez dans "Paramètres" > "Clés API et SMTP" > "Clés API"
# 4. Cliquez "Créer une nouvelle clé API"
# 5. Nom: "MyTechGear Medusa Backend"
# 6. Copiez la clé générée (xkeysib-...)
# 7. Remplacez YOUR_BREVO_API_KEY_HERE ci-dessous
#
# Email expéditeur:
# - Doit être vérifié dans Brevo (Paramètres > Expéditeurs & IP)
# - Format: votre-email@domaine.com
# - Utilisez votre email temporairement si vous n'avez pas de domaine

BREVO_API_KEY=REPLACE_ME
BREVO_SENDER_EMAIL=contact@mytechgear.fr
BREVO_SENDER_NAME=MyTechGear

# Note: Offre gratuite Brevo (pas de carte bancaire requise)
# - 300 emails/jour
# - Support français
# - Serveurs EU (RGPD-compliant)
# - Templates visuels inclus

# Désactiver l'Admin UI Medusa (mode API-only)
DISABLE_MEDUSA_ADMIN=true

# ==================================================
# DIAGNOSTICS ENDPOINT
# ==================================================
# Clé d'accès à GET /_diagnostics — endpoint de diagnostic interne.
# Doit être une chaîne longue et aléatoire (min 32 chars).
# Si absent ou vide, l'endpoint répond 401 systématiquement.
# Générer: openssl rand -hex 32
DEBUG_KEY=REPLACE_ME

# Activer l'endpoint /_diagnostics (false par défaut en production)
# Mettre à true uniquement pour debug ponctuel, remettre false ensuite
DIAGNOSTICS_ENABLED=false

# ==================================================
# S3 STORAGE — MinIO via SSH Tunnel (Instance Unique)
# ==================================================
# Architecture: MinIO tourne UNIQUEMENT sur Coolify (prod)
# Accès dev: SSH tunnel localhost:19000 → minio:9000
#
# Setup tunnel SSH:
#   ssh -L 19000:127.0.0.1:9000 -L 19001:127.0.0.1:9001 user@serveur.mytechgear.eu
#
# Ou ajouter dans ~/.ssh/config:
#   Host mytechgear-tunnel
#     HostName serveur.mytechgear.eu
#     User deployer
#     LocalForward 19000 127.0.0.1:9000
#     LocalForward 19001 127.0.0.1:9001
#
# Puis: ssh -fN mytechgear-tunnel

# Endpoint S3 interne (via tunnel SSH en dev)
S3_ENDPOINT=http://localhost:19000

# Région S3 (MinIO utilise "us-east-1" par convention)
S3_REGION=us-east-1

# Credentials S3 (Service Account généré via: make minio-keys)
S3_ACCESS_KEY_ID=REPLACE_ME
S3_SECRET_ACCESS_KEY=REPLACE_ME

# Nom du bucket
S3_BUCKET=mytechgear-assets

# URL publique des assets (CDN ou domaine custom)
# IMPORTANT: indépendant de S3_ENDPOINT (utilisé pour générer les URLs publiques)
FILE_URL=https://s3.assets.mytechgear.eu

# ==================================================
# ADMIN API AUTHENTICATION
# ==================================================
# Token for admin API endpoints (/admin/image-refs, etc.)
# Generate with: openssl rand -hex 32
# IMPORTANT: Never commit the actual token to Git
ADMIN_API_TOKEN=REPLACE_ME
